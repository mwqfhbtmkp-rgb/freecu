<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FREECU Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #020617;
    color: #e5e7eb;
    text-align: center;
    padding: 40px 20px;
  }

  h1 { font-size: 42px; margin-bottom: 6px; }
  .subtitle { color:#94a3b8; font-size:14px; margin-bottom:30px; }

  #gameArea {
    width:100%;
    max-width:520px;
    height:220px;
    border:1px solid #0f172a;
    border-radius:12px;
    margin:0 auto;
    position:relative;
    overflow:hidden;
  }

  #player {
    width:30px;
    height:30px;
    background:#22c55e;
    position:absolute;
    bottom:20px;
    left:40px;
    border-radius:6px;
  }

  .obstacle {
    position:absolute;
    bottom:20px;
    background:#e5e7eb;
    border-radius:4px;
  }

  .info { margin-top:20px; color:#94a3b8; font-size:14px; }
  .score { margin-top:10px; font-size:20px; }
  .highscore { margin-top:6px; font-size:14px; color:#a5b4fc; }
  #gameOver { display:none; margin-top:15px; font-size:18px; }

  a { display:block; margin-top:35px; color:#38bdf8; text-decoration:none; }
</style>
</head>

<body>

<h1>FREECU Runner</h1>
<div class="subtitle">Early prototype — no rewards, no tokens, no promises.</div>

<div id="gameArea">
  <div id="player"></div>
</div>

<div class="info">SPACE or TAP to jump</div>
<div class="score">Score: <span id="score">0</span></div>
<div class="highscore">High score: <span id="highScore">0</span></div>
<div id="gameOver">Game Over — press R or TAP to restart</div>

<a href="index.html">← Back to home</a>

<script>
const gameArea = document.getElementById("gameArea");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const highScoreEl = document.getElementById("highScore");
const gameOverEl = document.getElementById("gameOver");

// --- STATE ---
let position = 20;
let velocity = 0;
let gravity = 0.8;
let jumping = false;

let obstacles = [];
let frame = 0;
let score = 0;
let speed = 3;
let running = true;

// --- HIGH SCORE ---
let highScore = localStorage.getItem("freecuHighScore");
if (!highScore) {
  highScore = 0;
  localStorage.setItem("freecuHighScore", 0);
}
highScoreEl.textContent = highScore;

// --- CONTROLS ---
document.addEventListener("keydown", e => {
  if (e.code === "Space" && running) jump();
  if (e.code === "KeyR" && !running) resetGame();
});

gameArea.addEventListener("touchstart", () => {
  if (running) jump();
  else resetGame();
});

// --- JUMP ---
function jump() {
  if (!jumping) {
    velocity = 10;
    jumping = true;
  }
}

// --- OBSTACLES ---
function createObstacle() {
  const obs = document.createElement("div");
  obs.className = "obstacle";
  obs.style.width = 18 + Math.random() * 22 + "px";
  obs.style.height = 20 + Math.random() * 30 + "px";
  obs.style.left = gameArea.offsetWidth + "px";
  gameArea.appendChild(obs);
  obstacles.push(obs);
}

// --- RESET ---
function resetGame() {
  obstacles.forEach(o => o.remove());
  obstacles = [];
  position = 20;
  velocity = 0;
  score = 0;
  speed = 3;
  running = true;
  jumping = false;
  scoreEl.textContent = score;
  gameOverEl.style.display = "none";
}

// --- LOOP ---
function loop() {
  if (running) {

    // Physics
    velocity -= gravity;
    position += velocity;

    if (position <= 20) {
      position = 20;
      velocity = 0;
      jumping = false;
    }

    player.style.bottom = position + "px";

    // Obstacles
    if (frame % 120 === 0) createObstacle();

    obstacles.forEach((obs, i) => {
      let x = obs.offsetLeft - speed;
      obs.style.left = x + "px";

      const obsHeight = obs.offsetHeight;

      // Collision
      if (x < 65 && x > 35 && position < 18 + obsHeight) {
        running = false;
        gameOverEl.style.display = "block";

        // SAVE HIGH SCORE
        if (score > highScore) {
          highScore = score;
          localStorage.setItem("freecuHighScore", highScore);
          highScoreEl.textContent = highScore;
        }
      }

      // Remove obstacle
      if (x < -50) {
        obs.remove();
        obstacles.splice(i, 1);
        score++;
        scoreEl.textContent = score;
        speed += 0.1;
      }
    });

    frame++;
  }

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>